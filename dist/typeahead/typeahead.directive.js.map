{"version":3,"file":"typeahead.directive.js","sourceRoot":"","sources":["../../.tmp/typeahead/typeahead.directive.ts"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable:max-file-line-count */\r\nimport {\r\n  ChangeDetectorRef,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  TemplateRef,\r\n  ViewContainerRef\r\n} from '@angular/core';\r\nimport { NgControl } from '@angular/forms';\r\n\r\nimport { from, Observable, Subscription } from 'rxjs';\r\nimport { ComponentLoader, ComponentLoaderFactory } from '../component-loader/index';\r\nimport { TypeaheadContainerComponent } from './typeahead-container.component';\r\nimport { TypeaheadMatch } from './typeahead-match.class';\r\nimport { getValueFromObject, latinize, tokenize } from './typeahead-utils';\r\nimport { debounceTime, filter, mergeMap, switchMap, toArray } from 'rxjs/operators';\r\n\r\n@Directive({selector: '[typeahead]', exportAs: 'bs-typeahead'})\r\nexport class TypeaheadDirective implements OnInit, OnDestroy {\r\n  /** options source, can be Array of strings, objects or\r\n   * an Observable for external matching process\r\n   */\r\n  @Input() typeahead: any;\r\n  /** minimal no of characters that needs to be entered before\r\n   * typeahead kicks-in. When set to 0, typeahead shows on focus with full\r\n   * list of options (limited as normal by typeaheadOptionsLimit)\r\n   */\r\n  @Input() typeaheadMinLength: number = void 0;\r\n  /** minimal wait time after last character typed before typeahead kicks-in */\r\n  @Input() typeaheadWaitMs: number;\r\n  /** maximum length of options items list */\r\n  @Input() typeaheadOptionsLimit: number;\r\n  /** when options source is an array of objects, the name of field\r\n   * that contains the options value, we use array item as option in case\r\n   * of this field is missing. Supports nested properties and methods.\r\n   */\r\n  @Input() typeaheadOptionField: string;\r\n  /** when options source is an array of objects, the name of field that\r\n   * contains the group value, matches are grouped by this field when set.\r\n   */\r\n  @Input() typeaheadGroupField: string;\r\n  /** should be used only in case of typeahead attribute is array.\r\n   * If true - loading of options will be async, otherwise - sync.\r\n   * true make sense if options array is large.\r\n   */\r\n  @Input() typeaheadAsync: boolean = void 0;\r\n  /** match latin symbols.\r\n   * If true the word súper would match super and vice versa.\r\n   */\r\n  @Input() typeaheadLatinize = true;\r\n  /** Can be use to search words by inserting a single white space between each characters\r\n   *  for example 'C a l i f o r n i a' will match 'California'.\r\n   */\r\n  @Input() typeaheadSingleWords = true;\r\n  /** should be used only in case typeaheadSingleWords attribute is true.\r\n   * Sets the word delimiter to break words. Defaults to space.\r\n   */\r\n  @Input() typeaheadWordDelimiters = ' ';\r\n  /** should be used only in case typeaheadSingleWords attribute is true.\r\n   * Sets the word delimiter to match exact phrase.\r\n   * Defaults to simple and double quotes.\r\n   */\r\n  @Input() typeaheadPhraseDelimiters = '\\'\"';\r\n  /** used to specify a custom item template.\r\n   * Template variables exposed are called item and index;\r\n   */\r\n  @Input() typeaheadItemTemplate: TemplateRef<any>;\r\n  /** used to specify a custom options list template.\r\n   * Template variables: matches, itemTemplate, query\r\n   */\r\n  @Input() optionsListTemplate: TemplateRef<any>;\r\n  /** specifies if typeahead is scrollable  */\r\n  @Input() typeaheadScrollable = false;\r\n  /** specifies number of options to show in scroll view  */\r\n  @Input() typeaheadOptionsInScrollableView = 5;\r\n  /** fired when 'busy' state of this component was changed,\r\n   * fired on async mode only, returns boolean\r\n   */\r\n  @Output() typeaheadLoading = new EventEmitter<boolean>();\r\n  /** fired on every key event and returns true\r\n   * in case of matches are not detected\r\n   */\r\n  @Output() typeaheadNoResults = new EventEmitter<boolean>();\r\n  /** fired when option was selected, return object with data of this option */\r\n  @Output() typeaheadOnSelect = new EventEmitter<TypeaheadMatch>();\r\n  /** fired when blur event occurres. returns the active item */\r\n  @Output() typeaheadOnBlur = new EventEmitter<any>();\r\n\r\n  /**\r\n   * A selector specifying the element the typeahead should be appended to.\r\n   * Currently only supports \"body\".\r\n   */\r\n  @Input() container: string;\r\n\r\n  /** This attribute indicates that the dropdown should be opened upwards */\r\n  @Input() dropup = false;\r\n\r\n  // not yet implemented\r\n  /** if false restrict model values to the ones selected from the popup only will be provided */\r\n  // @Input() protected typeaheadEditable:boolean;\r\n  /** if false the first match automatically will not be focused as you type */\r\n  // @Input() protected typeaheadFocusFirst:boolean;\r\n  /** format the ng-model result after selection */\r\n  // @Input() protected typeaheadInputFormatter:any;\r\n  /** if true automatically select an item when there is one option that exactly matches the user input */\r\n  // @Input() protected typeaheadSelectOnExact:boolean;\r\n  /**  if true select the currently highlighted match on blur */\r\n  // @Input() protected typeaheadSelectOnBlur:boolean;\r\n  /**  if false don't focus the input element the typeahead directive is associated with on selection */\r\n    // @Input() protected typeaheadFocusOnSelect:boolean;\r\n\r\n  _container: TypeaheadContainerComponent;\r\n  isTypeaheadOptionsListActive = false;\r\n\r\n  protected keyUpEventEmitter: EventEmitter<any> = new EventEmitter();\r\n  protected _matches: TypeaheadMatch[];\r\n  protected placement = 'bottom-left';\r\n  // protected popup:ComponentRef<TypeaheadContainerComponent>;\r\n\r\n  private _typeahead: ComponentLoader<TypeaheadContainerComponent>;\r\n  private _subscriptions: Subscription[] = [];\r\n  private _outsideClickListener: Function;\r\n\r\n  constructor(private ngControl: NgControl,\r\n              private element: ElementRef,\r\n              viewContainerRef: ViewContainerRef,\r\n              private renderer: Renderer2,\r\n              cis: ComponentLoaderFactory,\r\n              private changeDetection: ChangeDetectorRef) {\r\n    this._typeahead = cis.createLoader<TypeaheadContainerComponent>(\r\n      element,\r\n      viewContainerRef,\r\n      renderer\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.typeaheadOptionsLimit = this.typeaheadOptionsLimit || 20;\r\n    this.typeaheadMinLength =\r\n      this.typeaheadMinLength === void 0 ? 1 : this.typeaheadMinLength;\r\n    this.typeaheadWaitMs = this.typeaheadWaitMs || 0;\r\n\r\n    // async should be false in case of array\r\n    if (\r\n      this.typeaheadAsync === undefined &&\r\n      !(this.typeahead instanceof Observable)\r\n    ) {\r\n      this.typeaheadAsync = false;\r\n    }\r\n\r\n    if (this.typeahead instanceof Observable) {\r\n      this.typeaheadAsync = true;\r\n    }\r\n\r\n    if (this.typeaheadAsync) {\r\n      this.asyncActions();\r\n    } else {\r\n      this.syncActions();\r\n    }\r\n  }\r\n\r\n  @HostListener('input', ['$event'])\r\n  onInput(e: any): void {\r\n    // For `<input>`s, use the `value` property. For others that don't have a\r\n    // `value` (such as `<span contenteditable=\"true\">`), use either\r\n    // `textContent` or `innerText` (depending on which one is supported, i.e.\r\n    // Firefox or IE).\r\n    const value =\r\n      e.target.value !== undefined\r\n        ? e.target.value\r\n        : e.target.textContent !== undefined\r\n        ? e.target.textContent\r\n        : e.target.innerText;\r\n    if (value != null && value.trim().length >= this.typeaheadMinLength) {\r\n      this.typeaheadLoading.emit(true);\r\n      this.keyUpEventEmitter.emit(e.target.value);\r\n    } else {\r\n      this.typeaheadLoading.emit(false);\r\n      this.typeaheadNoResults.emit(false);\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  @HostListener('keyup', ['$event'])\r\n  onChange(e: any): void {\r\n    if (this._container) {\r\n      // esc\r\n      if (e.keyCode === 27) {\r\n        this.hide();\r\n\r\n        return;\r\n      }\r\n\r\n      // up\r\n      if (e.keyCode === 38) {\r\n        this._container.prevActiveMatch();\r\n\r\n        return;\r\n      }\r\n\r\n      // down\r\n      if (e.keyCode === 40) {\r\n        this._container.nextActiveMatch();\r\n\r\n        return;\r\n      }\r\n\r\n      // enter, tab\r\n      if (e.keyCode === 13) {\r\n        this._container.selectActiveMatch();\r\n\r\n        return;\r\n      }\r\n    }\r\n  }\r\n\r\n  @HostListener('click')\r\n  @HostListener('focus')\r\n  onFocus(): void {\r\n    if (this.typeaheadMinLength === 0) {\r\n      this.typeaheadLoading.emit(true);\r\n      this.keyUpEventEmitter.emit(this.element.nativeElement.value || '');\r\n    }\r\n  }\r\n\r\n  @HostListener('blur')\r\n  onBlur(): void {\r\n    if (this._container && !this._container.isFocused) {\r\n      this.typeaheadOnBlur.emit(this._container.active);\r\n    }\r\n  }\r\n\r\n  @HostListener('keydown', ['$event'])\r\n  onKeydown(e: any): void {\r\n    // no container - no problems\r\n    if (!this._container) {\r\n      return;\r\n    }\r\n\r\n    // if an item is visible - prevent form submission\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n\r\n      return;\r\n    }\r\n\r\n    // if an item is visible - don't change focus\r\n    if (e.keyCode === 9) {\r\n      e.preventDefault();\r\n      this._container.selectActiveMatch();\r\n\r\n      return;\r\n    }\r\n  }\r\n\r\n  changeModel(match: TypeaheadMatch): void {\r\n    const valueStr: string = match.value;\r\n    this.ngControl.viewToModelUpdate(valueStr);\r\n    (this.ngControl.control).setValue(valueStr);\r\n    this.changeDetection.markForCheck();\r\n    this.hide();\r\n  }\r\n\r\n  get matches(): any[] {\r\n    return this._matches;\r\n  }\r\n\r\n  show(): void {\r\n    this._typeahead\r\n      .attach(TypeaheadContainerComponent)\r\n      // todo: add append to body, after updating positioning service\r\n      .to(this.container)\r\n      .position({attachment: `${this.dropup ? 'top' : 'bottom'} left`})\r\n      .show({\r\n        typeaheadRef: this,\r\n        placement: this.placement,\r\n        animation: false,\r\n        dropup: this.dropup\r\n      });\r\n\r\n    this._outsideClickListener = this.renderer.listen('document', 'click', (e: MouseEvent) => {\r\n      if (this.typeaheadMinLength === 0 && this.element.nativeElement.contains(e.target)) {\r\n        return;\r\n      }\r\n      this.onOutsideClick();\r\n    });\r\n\r\n    this._container = this._typeahead.instance;\r\n    this._container.parent = this;\r\n    // This improves the speed as it won't have to be done for each list item\r\n    const normalizedQuery = (this.typeaheadLatinize\r\n      ? latinize(this.ngControl.control.value)\r\n      : this.ngControl.control.value)\r\n      .toString()\r\n      .toLowerCase();\r\n    this._container.query = this.typeaheadSingleWords\r\n      ? tokenize(\r\n        normalizedQuery,\r\n        this.typeaheadWordDelimiters,\r\n        this.typeaheadPhraseDelimiters\r\n      )\r\n      : normalizedQuery;\r\n    this._container.matches = this._matches;\r\n    this.element.nativeElement.focus();\r\n  }\r\n\r\n  hide(): void {\r\n    if (this._typeahead.isShown) {\r\n      this._typeahead.hide();\r\n      this._outsideClickListener();\r\n      this._container = null;\r\n    }\r\n  }\r\n\r\n  onOutsideClick(): void {\r\n    if (this._container && !this._container.isFocused) {\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): any {\r\n    // clean up subscriptions\r\n    for (const sub of this._subscriptions) {\r\n      sub.unsubscribe();\r\n    }\r\n    this._typeahead.dispose();\r\n  }\r\n\r\n  protected asyncActions(): void {\r\n    this._subscriptions.push(\r\n      this.keyUpEventEmitter\r\n        .pipe(\r\n          debounceTime(this.typeaheadWaitMs),\r\n          switchMap(() => this.typeahead)\r\n        )\r\n        .subscribe((matches: any[]) => {\r\n          this.finalizeAsyncCall(matches);\r\n        })\r\n    );\r\n  }\r\n\r\n  protected syncActions(): void {\r\n    this._subscriptions.push(\r\n      this.keyUpEventEmitter\r\n        .pipe(\r\n          debounceTime(this.typeaheadWaitMs),\r\n          mergeMap((value: string) => {\r\n            const normalizedQuery = this.normalizeQuery(value);\r\n\r\n            return from(this.typeahead)\r\n              .pipe(\r\n                filter((option: any) => {\r\n                  return (\r\n                    option &&\r\n                    this.testMatch(this.normalizeOption(option), normalizedQuery)\r\n                  );\r\n                }),\r\n                toArray()\r\n              );\r\n          })\r\n        )\r\n        .subscribe((matches: any[]) => {\r\n          this.finalizeAsyncCall(matches);\r\n        })\r\n    );\r\n  }\r\n\r\n  protected normalizeOption(option: any): any {\r\n    const optionValue: string = getValueFromObject(\r\n      option,\r\n      this.typeaheadOptionField\r\n    );\r\n    const normalizedOption = this.typeaheadLatinize\r\n      ? latinize(optionValue)\r\n      : optionValue;\r\n\r\n    return normalizedOption.toLowerCase();\r\n  }\r\n\r\n  protected normalizeQuery(value: string): any {\r\n    // If singleWords, break model here to not be doing extra work on each\r\n    // iteration\r\n    let normalizedQuery: any = (this.typeaheadLatinize\r\n      ? latinize(value)\r\n      : value)\r\n      .toString()\r\n      .toLowerCase();\r\n    normalizedQuery = this.typeaheadSingleWords\r\n      ? tokenize(\r\n        normalizedQuery,\r\n        this.typeaheadWordDelimiters,\r\n        this.typeaheadPhraseDelimiters\r\n      )\r\n      : normalizedQuery;\r\n\r\n    return normalizedQuery;\r\n  }\r\n\r\n  protected testMatch(match: string, test: any): boolean {\r\n    let spaceLength: number;\r\n\r\n    if (typeof test === 'object') {\r\n      spaceLength = test.length;\r\n      for (let i = 0; i < spaceLength; i += 1) {\r\n        if (test[i].length > 0 && match.indexOf(test[i]) < 0) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    return match.indexOf(test) >= 0;\r\n  }\r\n\r\n  protected finalizeAsyncCall(matches: any[]): void {\r\n    this.prepareMatches(matches);\r\n\r\n    this.typeaheadLoading.emit(false);\r\n    this.typeaheadNoResults.emit(!this.hasMatches());\r\n\r\n    if (!this.hasMatches()) {\r\n      this.hide();\r\n\r\n      return;\r\n    }\r\n\r\n    if (this._container) {\r\n      // This improves the speed as it won't have to be done for each list item\r\n      const normalizedQuery = (this.typeaheadLatinize\r\n        ? latinize(this.ngControl.control.value)\r\n        : this.ngControl.control.value)\r\n        .toString()\r\n        .toLowerCase();\r\n      this._container.query = this.typeaheadSingleWords\r\n        ? tokenize(\r\n          normalizedQuery,\r\n          this.typeaheadWordDelimiters,\r\n          this.typeaheadPhraseDelimiters\r\n        )\r\n        : normalizedQuery;\r\n      this._container.matches = this._matches;\r\n    } else {\r\n      this.show();\r\n    }\r\n  }\r\n\r\n  protected prepareMatches(options: any[]): void {\r\n    const limited: any[] = options.slice(0, this.typeaheadOptionsLimit);\r\n\r\n    if (this.typeaheadGroupField) {\r\n      let matches: TypeaheadMatch[] = [];\r\n\r\n      // extract all group names\r\n      const groups = limited\r\n        .map((option: any) =>\r\n          getValueFromObject(option, this.typeaheadGroupField)\r\n        )\r\n        .filter((v: string, i: number, a: any[]) => a.indexOf(v) === i);\r\n\r\n      groups.forEach((group: string) => {\r\n        // add group header to array of matches\r\n        matches.push(new TypeaheadMatch(group, group, true));\r\n\r\n        // add each item of group to array of matches\r\n        matches = matches.concat(\r\n          limited\r\n            .filter(\r\n              (option: any) =>\r\n                getValueFromObject(option, this.typeaheadGroupField) === group\r\n            )\r\n            .map(\r\n              (option: any) =>\r\n                new TypeaheadMatch(\r\n                  option,\r\n                  getValueFromObject(option, this.typeaheadOptionField)\r\n                )\r\n            )\r\n        );\r\n      });\r\n\r\n      this._matches = matches;\r\n    } else {\r\n      this._matches = limited.map(\r\n        (option: any) =>\r\n          new TypeaheadMatch(\r\n            option,\r\n            getValueFromObject(option, this.typeaheadOptionField)\r\n          )\r\n      );\r\n    }\r\n  }\r\n\r\n  protected hasMatches(): boolean {\r\n    return this._matches.length > 0;\r\n  }\r\n}\r\n"]}