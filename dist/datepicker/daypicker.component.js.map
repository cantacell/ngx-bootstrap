{"version":3,"file":"daypicker.component.js","sourceRoot":"","sources":["../../.tmp/datepicker/daypicker.component.ts"],"names":[],"mappings":"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","sourcesContent":["// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { isBs3 } from '../utils/theme-provider';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'daypicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode === 'day'\" role=\"grid\" [attr.aria-labelledby]=\"datePicker.uniqueId + '-title'\" aria-activedescendant=\"activeDateId\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\">‹</button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\"\r\n                tabindex=\"-1\">&lt;</button>\r\n      </th>\r\n      <th [attr.colspan]=\"5 + (datePicker.showWeeks ? 1 : 0)\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\"\r\n                type=\"button\" class=\"btn btn-default btn-secondary btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button *ngIf=\"!isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\">›</button>\r\n        <button *ngIf=\"isBs4\"\r\n                type=\"button\"\r\n                class=\"btn btn-default btn-secondary btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\"\r\n                tabindex=\"-1\">&gt;\r\n        </button>\r\n      </th>\r\n    </tr>\r\n    <tr>\r\n      <th *ngIf=\"datePicker.showWeeks\"></th>\r\n      <th *ngFor=\"let labelz of labels\" class=\"text-center\">\r\n        <small aria-label=\"labelz.full\"><b>{{ labelz.abbr }}</b></small>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <ng-template ngFor [ngForOf]=\"rows\" let-rowz=\"$implicit\" let-index=\"index\">\r\n      <tr *ngIf=\"!(datePicker.onlyCurrentMonth && rowz[0].secondary && rowz[6].secondary)\">\r\n        <td *ngIf=\"datePicker.showWeeks\" class=\"h6\" class=\"text-center\">\r\n          <em>{{ weekNumbers[index] }}</em>\r\n        </td>\r\n        <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [id]=\"dtz.uid\">\r\n          <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-sm {{dtz.customClass}}\"\r\n                  *ngIf=\"!(datePicker.onlyCurrentMonth && dtz.secondary)\"\r\n                  [ngClass]=\"{'btn-secondary': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected, disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz), 'btn-default': !isBs4}\"\r\n                  [disabled]=\"dtz.disabled\"\r\n                  (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n            <span [ngClass]=\"{'text-muted': dtz.secondary || dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-secondary {\r\n      color: #292b2c;\r\n      background-color: #fff;\r\n      border-color: #ccc;\r\n    }\r\n    :host .btn-info .text-muted {\r\n      color: #292b2c !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class DayPickerComponent implements OnInit {\r\n  labels: any[] = [];\r\n  title: string;\r\n  rows: any[] = [];\r\n  weekNumbers: number[] = [];\r\n  datePicker: DatePickerInnerComponent;\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  /*protected getDaysInMonth(year:number, month:number) {\r\n   return ((month === 1) && (year % 4 === 0) &&\r\n   ((year % 100 !== 0) || (year % 400 === 0))) ? 29 : DAYS_IN_MONTH[month];\r\n   }*/\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepDay = { months: 1 };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const year = this.activeDate.getFullYear();\r\n      const month = this.activeDate.getMonth();\r\n      const firstDayOfMonth = new Date(year, month, 1);\r\n      const difference = this.startingDay - firstDayOfMonth.getDay();\r\n      const numDisplayedFromPreviousMonth =\r\n        difference > 0 ? 7 - difference : -difference;\r\n      const firstDate = new Date(firstDayOfMonth.getTime());\r\n\r\n      if (numDisplayedFromPreviousMonth > 0) {\r\n        firstDate.setDate(-numDisplayedFromPreviousMonth + 1);\r\n      }\r\n\r\n      // 42 is the number of days on a six-week calendar\r\n      const _days: Date[] = self.getDates(firstDate, 42);\r\n      const days: any[] = [];\r\n      for (let i = 0; i < 42; i++) {\r\n        const _dateObject = this.createDateObject(_days[i], this.formatDay);\r\n        _dateObject.secondary = _days[i].getMonth() !== month;\r\n        _dateObject.uid = this.uniqueId + '-' + i;\r\n        days[i] = _dateObject;\r\n      }\r\n\r\n      self.labels = [];\r\n      for (let j = 0; j < 7; j++) {\r\n        self.labels[j] = {};\r\n        self.labels[j].abbr = this.dateFilter(\r\n          days[j].date,\r\n          this.formatDayHeader\r\n        );\r\n        self.labels[j].full = this.dateFilter(days[j].date, 'EEEE');\r\n      }\r\n\r\n      self.title = this.dateFilter(this.activeDate, this.formatDayTitle);\r\n      self.rows = this.split(days, 7);\r\n\r\n      if (this.showWeeks) {\r\n        self.weekNumbers = [];\r\n        const thursdayIndex = (4 + 7 - this.startingDay) % 7;\r\n        const numWeeks = self.rows.length;\r\n        for (let curWeek = 0; curWeek < numWeeks; curWeek++) {\r\n          self.weekNumbers.push(\r\n            self.getISO8601WeekNumber(self.rows[curWeek][thursdayIndex].date)\r\n          );\r\n        }\r\n      }\r\n    }, 'day');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      const d1 = new Date(date1.getFullYear(), date1.getMonth(), date1.getDate());\r\n      const d2 = new Date(date2.getFullYear(), date2.getMonth(), date2.getDate());\r\n      return d1.getTime() - d2.getTime();\r\n    }, 'day');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getDates(startDate: Date, n: number): Date[] {\r\n    const dates: Date[] = new Array(n);\r\n    let current = new Date(startDate.getTime());\r\n    let i = 0;\r\n    let date: Date;\r\n    while (i < n) {\r\n      date = new Date(current.getTime());\r\n      date = this.datePicker.fixTimeZone(date);\r\n      dates[i++] = date;\r\n      current = new Date(\r\n        date.getFullYear(),\r\n        date.getMonth(),\r\n        date.getDate() + 1\r\n      );\r\n    }\r\n    return dates;\r\n  }\r\n\r\n  protected getISO8601WeekNumber(date: Date): number {\r\n    const checkDate = new Date(date.getTime());\r\n    // Thursday\r\n    checkDate.setDate(checkDate.getDate() + 4 - (checkDate.getDay() || 7));\r\n    const time = checkDate.getTime();\r\n    // Compare with Jan 1\r\n    checkDate.setMonth(0);\r\n    checkDate.setDate(1);\r\n    return (\r\n      Math.floor(Math.round((time - checkDate.getTime()) / 86400000) / 7) + 1\r\n    );\r\n  }\r\n\r\n  // todo: key events implementation\r\n}\r\n"]}