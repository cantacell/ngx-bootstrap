{"version":3,"file":"yearpicker.component.js","sourceRoot":"","sources":["../../.tmp/datepicker/yearpicker.component.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,SAAS,EAAU,MAAM,eAAe,CAAC;AAElD,OAAO,EAAE,KAAK,EAAE,MAAM,yBAAyB,CAAC;AAChD,OAAO,EAAE,wBAAwB,EAAE,MAAM,8BAA8B,CAAC;;IAsDtE,6BAAY,UAAoC;oBAFlC,EAAE;QAGd,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;KAC9B;IAED,sBAAI,sCAAK;aAAT;YACE,MAAM,CAAC,CAAC,KAAK,EAAE,CAAC;SACjB;;;OAAA;IAED,sCAAQ,GAAR;QACE,IAAM,IAAI,GAAG,IAAI,CAAC;QAElB,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,SAAS,EAAE,CAAC;QAEhE,IAAI,CAAC,UAAU,CAAC,qBAAqB,CAAC;YACpC,IAAM,KAAK,GAAU,IAAI,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAC/C,IAAI,IAAU,CAAC;YACf,IAAM,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC,CAAC;YAElE,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,EAAE,CAAC,EAAE,EAAE,CAAC;gBACxC,IAAI,GAAG,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACjC,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;gBAC9B,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;gBACxD,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,QAAQ,GAAG,GAAG,GAAG,CAAC,CAAC;aACxC;YAED,IAAI,CAAC,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,IAAI,CACjE,KAAK,CACN,CAAC;YACF,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,CAAC;SAC7D,EAAE,MAAM,CAAC,CAAC;QAEX,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,UAChC,KAAW,EACX,KAAW;YAEX,MAAM,CAAC,KAAK,CAAC,WAAW,EAAE,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;SAClD,EAAE,MAAM,CAAC,CAAC;QAEX,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;KAC/B;IAES,6CAAe,GAAzB,UAA0B,IAAY;;QAEpC,MAAM,CAAC,CACL,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,CACvE,CAAC;KACH;;gBAlGF,SAAS,SAAC;oBACT,QAAQ,EAAE,YAAY;oBACtB,QAAQ,EAAE,w1DAoCT;oBACD,MAAM,EAAE;wBACN,iFAID;qBACA;iBACF;;;;gBAhDQ,wBAAwB;;8BALjC;;SAsDa,mBAAmB","sourcesContent":["// @deprecated\r\n// tslint:disable\r\nimport { Component, OnInit } from '@angular/core';\r\n\r\nimport { isBs3 } from '../utils/theme-provider';\r\nimport { DatePickerInnerComponent } from './datepicker-inner.component';\r\n\r\n@Component({\r\n  selector: 'yearpicker',\r\n  template: `\r\n<table *ngIf=\"datePicker.datepickerMode==='year'\" role=\"grid\">\r\n  <thead>\r\n    <tr>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-left float-left\"\r\n                (click)=\"datePicker.move(-1)\" tabindex=\"-1\">‹</button>\r\n      </th>\r\n      <th [attr.colspan]=\"((datePicker.yearColLimit - 2) <= 0) ? 1 : datePicker.yearColLimit - 2\">\r\n        <button [id]=\"datePicker.uniqueId + '-title'\" role=\"heading\"\r\n                type=\"button\" class=\"btn btn-default btn-sm\"\r\n                (click)=\"datePicker.toggleMode(0)\"\r\n                [disabled]=\"datePicker.datepickerMode === datePicker.maxMode\"\r\n                [ngClass]=\"{disabled: datePicker.datepickerMode === datePicker.maxMode}\" tabindex=\"-1\" style=\"width:100%;\">\r\n          <strong>{{ title }}</strong>\r\n        </button>\r\n      </th>\r\n      <th>\r\n        <button type=\"button\" class=\"btn btn-default btn-sm pull-right float-right\"\r\n                (click)=\"datePicker.move(1)\" tabindex=\"-1\">›</button>\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let rowz of rows\">\r\n      <td *ngFor=\"let dtz of rowz\" class=\"text-center\" role=\"gridcell\" [attr.id]=\"dtz.uid\">\r\n        <button type=\"button\" style=\"min-width:100%;\" class=\"btn btn-default\"\r\n                [ngClass]=\"{'btn-link': isBs4 && !dtz.selected && !datePicker.isActive(dtz), 'btn-info': dtz.selected || (isBs4 && !dtz.selected && datePicker.isActive(dtz)), disabled: dtz.disabled, active: !isBs4 && datePicker.isActive(dtz)}\"\r\n                [disabled]=\"dtz.disabled\"\r\n                (click)=\"datePicker.select(dtz.date)\" tabindex=\"-1\">\r\n          <span [ngClass]=\"{'text-success': isBs4 && dtz.current, 'text-info': !isBs4 && dtz.current}\">{{ dtz.label }}</span>\r\n        </button>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</table>\r\n  `,\r\n  styles: [\r\n    `\r\n    :host .btn-info .text-success {\r\n      color: #fff !important;\r\n    }\r\n  `\r\n  ]\r\n})\r\nexport class YearPickerComponent implements OnInit {\r\n  datePicker: DatePickerInnerComponent;\r\n  title: string;\r\n  rows: any[] = [];\r\n\r\n  constructor(datePicker: DatePickerInnerComponent) {\r\n    this.datePicker = datePicker;\r\n  }\r\n\r\n  get isBs4(): boolean {\r\n    return !isBs3();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    const self = this;\r\n\r\n    this.datePicker.stepYear = { years: this.datePicker.yearRange };\r\n\r\n    this.datePicker.setRefreshViewHandler(function(): void {\r\n      const years: any[] = new Array(this.yearRange);\r\n      let date: Date;\r\n      const start = self.getStartingYear(this.activeDate.getFullYear());\r\n\r\n      for (let i = 0; i < this.yearRange; i++) {\r\n        date = new Date(start + i, 0, 1);\r\n        date = this.fixTimeZone(date);\r\n        years[i] = this.createDateObject(date, this.formatYear);\r\n        years[i].uid = this.uniqueId + '-' + i;\r\n      }\r\n\r\n      self.title = [years[0].label, years[this.yearRange - 1].label].join(\r\n        ' - '\r\n      );\r\n      self.rows = this.split(years, self.datePicker.yearColLimit);\r\n    }, 'year');\r\n\r\n    this.datePicker.setCompareHandler(function(\r\n      date1: Date,\r\n      date2: Date\r\n    ): number {\r\n      return date1.getFullYear() - date2.getFullYear();\r\n    }, 'year');\r\n\r\n    this.datePicker.refreshView();\r\n  }\r\n\r\n  protected getStartingYear(year: number): number {\r\n    // todo: parseInt\r\n    return (\r\n      (year - 1) / this.datePicker.yearRange * this.datePicker.yearRange + 1\r\n    );\r\n  }\r\n}\r\n"]}